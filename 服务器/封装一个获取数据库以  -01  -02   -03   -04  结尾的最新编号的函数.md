##封装一个获取数据库以  -01  -02   -03   -04  结尾的最新编号的函数

```
public  function getNewId($str,$model,$field){//要获取的字符串前部分，实例，表对应的字段名
    //获取数据库中P180706-x的数量实现自动生成编号
    $i = 0;//编号
    $str = $str."-";//可以设置来之数据库的一个自定义字符串
    do{
        ++$i;  //第一次就为1，排除编号0
        if($i < 10){
            $i = '0'.$i;
        }
    }while($model->get(["$field"=>$str.$i])); //如果存在就继续算下去
    $tempArray = $str.$i;//最新的编号
    return $tempArray;
}
```

##用法:

```
$str = "M1234";//这是字符串前段
$model = new ModelSql(); //实例化一个数据库表模块
$this->getNewId($str,$model,$field){//要获取的字符串前部分，实例，字符串在表当中对应的字段名
```